load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")

go_library(
    name = "go_default_library",
    srcs = [
        "action_dispatcher.go",
        "action_store.go",
        "application.go",
        "config.go",
        "configuration_embed.go",
        "emitter.go",
        "enroll_cmd.go",
        "fleet_acker.go",
        "fleet_decorator.go",
        "fleet_gateway.go",
        "global_config.go",
        "handler_action_policy_change.go",
        "handler_action_unenroll.go",
        "handler_default.go",
        "handler_unknown.go",
        "introspect_config_cmd.go",
        "introspect_output_cmd.go",
        "lazy_acker.go",
        "local_meta.go",
        "local_mode.go",
        "locker.go",
        "managed_mode.go",
        "monitoring_decorator.go",
        "once.go",
        "periodic.go",
        "router.go",
        "stream.go",
    ],
    importpath = "github.com/elastic/beats/v7/x-pack/elastic-agent/pkg/agent/application",
    visibility = ["//visibility:public"],
    deps = [
        "//libbeat/common/backoff:go_default_library",
        "//libbeat/common/transport/tlscommon:go_default_library",
        "//libbeat/logp:go_default_library",
        "//x-pack/elastic-agent/pkg/agent/application/filters:go_default_library",
        "//x-pack/elastic-agent/pkg/agent/application/info:go_default_library",
        "//x-pack/elastic-agent/pkg/agent/application/paths:go_default_library",
        "//x-pack/elastic-agent/pkg/agent/configrequest:go_default_library",
        "//x-pack/elastic-agent/pkg/agent/configuration:go_default_library",
        "//x-pack/elastic-agent/pkg/agent/errors:go_default_library",
        "//x-pack/elastic-agent/pkg/agent/operation:go_default_library",
        "//x-pack/elastic-agent/pkg/agent/program:go_default_library",
        "//x-pack/elastic-agent/pkg/agent/stateresolver:go_default_library",
        "//x-pack/elastic-agent/pkg/agent/storage:go_default_library",
        "//x-pack/elastic-agent/pkg/agent/transpiler:go_default_library",
        "//x-pack/elastic-agent/pkg/agent/warn:go_default_library",
        "//x-pack/elastic-agent/pkg/artifact/download/localremote:go_default_library",
        "//x-pack/elastic-agent/pkg/artifact/install:go_default_library",
        "//x-pack/elastic-agent/pkg/artifact/uninstall:go_default_library",
        "//x-pack/elastic-agent/pkg/config:go_default_library",
        "//x-pack/elastic-agent/pkg/core/logger:go_default_library",
        "//x-pack/elastic-agent/pkg/core/monitoring:go_default_library",
        "//x-pack/elastic-agent/pkg/core/monitoring/noop:go_default_library",
        "//x-pack/elastic-agent/pkg/core/server:go_default_library",
        "//x-pack/elastic-agent/pkg/core/state:go_default_library",
        "//x-pack/elastic-agent/pkg/dir:go_default_library",
        "//x-pack/elastic-agent/pkg/filewatcher:go_default_library",
        "//x-pack/elastic-agent/pkg/fleetapi:go_default_library",
        "//x-pack/elastic-agent/pkg/kibana:go_default_library",
        "//x-pack/elastic-agent/pkg/packer:go_default_library",
        "//x-pack/elastic-agent/pkg/release:go_default_library",
        "//x-pack/elastic-agent/pkg/reporter:go_default_library",
        "//x-pack/elastic-agent/pkg/reporter/fleet:go_default_library",
        "//x-pack/elastic-agent/pkg/reporter/log:go_default_library",
        "//x-pack/elastic-agent/pkg/scheduler:go_default_library",
        "//x-pack/elastic-agent/pkg/sorted:go_default_library",
        "@com_github_gofrs_flock//:go_default_library",
        "@in_gopkg_yaml_v2//:go_default_library",
    ],
)

go_test(
    name = "go_default_test",
    srcs = [
        "action_dispatcher_test.go",
        "action_store_test.go",
        "application_test.go",
        "config_test.go",
        "enroll_cmd_test.go",
        "fleet_acker_test.go",
        "fleet_gateway_test.go",
        "handler_action_policy_change_test.go",
        "lazy_acker_test.go",
        "locker_test.go",
        "managed_mode_test.go",
        "monitoring_decorator_test.go",
        "router_test.go",
    ],
    embed = [":go_default_library"],
    deps = [
        "//x-pack/elastic-agent/pkg/agent/application/filters:go_default_library",
        "//x-pack/elastic-agent/pkg/agent/configrequest:go_default_library",
        "//x-pack/elastic-agent/pkg/agent/configuration:go_default_library",
        "//x-pack/elastic-agent/pkg/agent/program:go_default_library",
        "//x-pack/elastic-agent/pkg/agent/storage:go_default_library",
        "//x-pack/elastic-agent/pkg/agent/transpiler:go_default_library",
        "//x-pack/elastic-agent/pkg/config:go_default_library",
        "//x-pack/elastic-agent/pkg/core/authority:go_default_library",
        "//x-pack/elastic-agent/pkg/core/logger:go_default_library",
        "//x-pack/elastic-agent/pkg/fleetapi:go_default_library",
        "//x-pack/elastic-agent/pkg/reporter:go_default_library",
        "//x-pack/elastic-agent/pkg/reporter/fleet:go_default_library",
        "//x-pack/elastic-agent/pkg/scheduler:go_default_library",
        "@com_github_pkg_errors//:go_default_library",
        "@com_github_stretchr_testify//assert:go_default_library",
        "@com_github_stretchr_testify//require:go_default_library",
    ],
)
